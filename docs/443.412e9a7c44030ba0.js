"use strict";(self.webpackChunkresume=self.webpackChunkresume||[]).push([[443],{4443:(S,u,r)=>{r.r(u),r.d(u,{AuthModule:()=>L});var p=r(8972),g=r(1450),m=r(5185),h=r(2684),f=r(7489),c=r.n(f),n=r(5062),M=r(1337),d=r(6895),a=r(4719),_=r(3726);function C(t,l){if(1&t){const e=n.EpF();n.TgZ(0,"div",9)(1,"input",10),n.NdJ("ngModelChange",function(s){n.CHM(e);const o=n.oxw();return n.KtG(o.on.username=s)}),n.qZA(),n.TgZ(2,"input",11),n.NdJ("ngModelChange",function(s){n.CHM(e);const o=n.oxw();return n.KtG(o.on.password=s)}),n.qZA(),n.TgZ(3,"button",12),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.signInWithAccount())}),n._UZ(4,"i",13),n._uU(5," Signin"),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.on.username),n.xp6(1),n.Q6J("ngModel",e.on.password)}}function v(t,l){if(1&t){const e=n.EpF();n.TgZ(0,"div",9)(1,"input",14),n.NdJ("ngModelChange",function(s){n.CHM(e);const o=n.oxw();return n.KtG(o.on.name=s)}),n.qZA(),n.TgZ(2,"input",10),n.NdJ("ngModelChange",function(s){n.CHM(e);const o=n.oxw();return n.KtG(o.on.username=s)}),n.qZA(),n.TgZ(3,"input",11),n.NdJ("ngModelChange",function(s){n.CHM(e);const o=n.oxw();return n.KtG(o.on.password=s)}),n.qZA(),n.TgZ(4,"button",12),n.NdJ("click",function(){n.CHM(e);const s=n.oxw();return n.KtG(s.signInWithAccount())}),n._UZ(5,"i",15),n._uU(6," Create"),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngModel",e.on.name),n.xp6(1),n.Q6J("ngModel",e.on.username),n.xp6(1),n.Q6J("ngModel",e.on.password)}}const x=[{path:"",component:(()=>{class t{constructor(e,i,s,o,w){this.socialLoginService=e,this.messageS=i,this.route=s,this.router=o,this.mainapiS=w,this.on={username:null,password:null,signup:!1,name:null,redirect:null},this.on.redirect=this.route.snapshot.queryParams.return??"/resume/list"}ngOnInit(){}signInWithFacebook(){this.socialLoginService.signInWithFacebook(e=>{e?this.handleSignin():this.displayMessage("error","Fill up required fields.")})}signInWithGoogle(){this.socialLoginService.signInWithGoogle(e=>{e?this.handleSignin():this.displayMessage("error","Fill up required fields.")})}handleSignin(){const i=this.socialLoginService.getSocialUser(),s={...c().pick(this.socialLoginService.getSocialUser(),["email","name","provider","photoUrl"]),provider:i.provider.toLowerCase(),username:i.id};this.mainapiS.authLogin(s).subscribe(o=>o?(localStorage.setItem("jwt_token",o.token),localStorage.setItem("user",JSON.stringify(c().omit(o,["token"]))),this.router.navigateByUrl(this.on.redirect)):this.displayMessage("error","Failed to login."),o=>this.displayMessage("error","Failed to login."))}signInWithAccount(){return(this.on.signup?["username","password","name"]:["username","password"]).some(o=>!this.on[o])?this.displayMessage("error","Fill up required fields."):/^[\w\.-]+@[a-zA-Z\d\.-]+\.[a-zA-Z]{2,}$/.test(this.on.username)?(this.mainapiS.authLogin({email:this.on.username,...c().pick(this.on,["name","username","signup","password"])}).subscribe(o=>(console.log(o),o?(localStorage.setItem("jwt_token",o.token),localStorage.setItem("user",JSON.stringify(c().omit(o,["token"]))),this.router.navigateByUrl(this.on.redirect)):this.displayMessage("error","Failed to login.")),o=>this.displayMessage("error","Failed to login.")),void console.log(this.on)):this.displayMessage("error","Please enter a valid email address.")}isUserLogged(){return this.socialLoginService.isUserLogged()}getUserName(){const e=this.socialLoginService.getSocialUser();return e?e.name:""}displayMessage(e,i){console.log("displayMessage1",i),this.messageS.updateEnvelop({type:e,message:i}),setTimeout(()=>{this.messageS.restart()},3e3)}signOut(){this.socialLoginService.signOut()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(M.a),n.Y36(h.Z),n.Y36(g.gz),n.Y36(g.F0),n.Y36(m.Z))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],decls:18,vars:2,consts:[[1,"main"],[1,"login-panel"],[1,"btn"],[1,"button","is-secondary","icon",3,"click"],[1,"fa-brands","fa-facebook"],[1,"fa-brands","fa-google"],[1,"button","is-secondary",3,"click"],[1,"fa-solid","fa-user-plus"],["class","signin",4,"ngIf"],[1,"signin"],["type","text","placeholder","Email",3,"ngModel","ngModelChange"],["type","password","placeholder","Password",3,"ngModel","ngModelChange"],[1,"button","is-primary",3,"click"],[1,"fa-solid","fa-right-to-bracket"],["type","text","placeholder","Full name",3,"ngModel","ngModelChange"],[1,"fa-solid","fa-plus"]],template:function(e,i){1&e&&(n.TgZ(0,"div",0)(1,"div",1),n._UZ(2,"app-message"),n.TgZ(3,"h2"),n._uU(4,"Login to start your wonderful journey with Angeyza"),n.qZA(),n.TgZ(5,"span"),n._uU(6,"Login with your prefered method"),n.qZA(),n.TgZ(7,"div",2)(8,"button",3),n.NdJ("click",function(){return i.signInWithFacebook()}),n._UZ(9,"i",4),n.qZA(),n.TgZ(10,"button",3),n.NdJ("click",function(){return i.signInWithGoogle()}),n._UZ(11,"i",5),n.qZA(),n.TgZ(12,"button",6),n.NdJ("click",function(){return i.on.signup=!i.on.signup}),n._UZ(13,"i",7),n._uU(14," Create Account"),n.qZA()(),n._UZ(15,"hr"),n.YNc(16,C,6,2,"div",8),n.YNc(17,v,7,3,"div",8),n.qZA()()),2&e&&(n.xp6(16),n.Q6J("ngIf",!i.on.signup),n.xp6(1),n.Q6J("ngIf",i.on.signup))},dependencies:[d.O5,a.Fj,a.JJ,a.On,_.q],styles:[".main[_ngcontent-%COMP%]{width:100%;height:100%;text-align:center}h2[_ngcontent-%COMP%]{margin-bottom:-15px}.login-panel[_ngcontent-%COMP%]{position:absolute;top:25%;left:40%;display:flex;flex-direction:column;gap:30px;width:500px;align-items:flex-start;padding-bottom:20px}.signin[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;align-items:flex-end;width:100%}input[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;justify-content:flex-end;width:100%}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}i.fa-facebook[_ngcontent-%COMP%]{color:var(--color-blue-700)}i.fa-google[_ngcontent-%COMP%]{color:var(--color-blue-500)}button[_ngcontent-%COMP%]{min-width:150px}.icon[_ngcontent-%COMP%]{background-color:#fff;padding:5px 15px}hr[_ngcontent-%COMP%]{border:1px solid var(--color-neutral-500);width:100%}@media (max-width: 600px){div.login-panel[_ngcontent-%COMP%]{width:400px;top:15%;left:15%}.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem}button[_ngcontent-%COMP%]{min-width:100px}h2[_ngcontent-%COMP%]{font-size:1.8rem}}"]}),t})(),pathMatch:"full"}];let y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(x),g.Bz]}),t})();var Z=r(5570);let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[d.ez,y,a.u5,a.UX,p.mZ,Z.m]}),t})()}}]);